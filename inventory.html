<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Inventory | Alfa Motors World</title>
    <meta
      name="description"
      content="Browse Alfa Motors World's inventory of premium pre-owned cars and bikes in Bangalore. Filter by brand, year, price and more to find your next vehicle. Contact us for test drives and financing options."
    />
    <meta
      name="keywords"
      content="used cars in bangalore, second hand cars bangalore, pre-owned cars Bangalore, buy used car Bangalore, sell car Bangalore, certified used cars bangalore, used cars near me Bangalore, second hand cars karnataka, used car dealer Bangalore"
    />
    <meta name="robots" content="index,follow,max-image-preview:large" />
    <link
      rel="canonical"
      href="https://www.alfamotorworld.com/https://www.alfamotorworld.com/inventory.html"
    />
    <link
      rel="alternate"
      href="https://www.alfamotorworld.com/https://www.alfamotorworld.com/inventory.html"
      hreflang="en"
    />
    <link
      rel="alternate"
      href="https://www.alfamotorworld.com/https://www.alfamotorworld.com/inventory.html"
      hreflang="hi"
    />
    <link rel="preconnect" href="https://alfa-motors-5yfh.vercel.app" crossorigin />
    <link
      rel="preconnect"
      href="https://alfa-motors-o5cm.vercel.app"
      crossorigin
    />
    <link
      rel="preconnect"
      href="https://www.googletagmanager.com"
      crossorigin
    />
    <!-- Performance: preconnect fonts and CDN for faster resource fetch -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin />
    <meta name="theme-color" content="#ffffff" />
    <link rel="icon" href="/favicon.ico" />
    <link rel="icon" type="image/svg+xml" href="/assets/okmotor.png" />

    <!-- If inventory was prefetched on the previous page, inject its main content quickly -->
    <script>
      (function () {
        try {
          if (typeof window !== "undefined" && window.sessionStorage) {
            var html = sessionStorage.getItem("prefetchedInventory");
            if (html) {
              try {
                var parser = new DOMParser();
                var doc = parser.parseFromString(html, "text/html");
                var content =
                  doc.querySelector("#maincontent") ||
                  doc.querySelector("main") ||
                  doc.body;
                if (content) {
                  document.addEventListener("DOMContentLoaded", function () {
                    var target =
                      document.querySelector("#maincontent") ||
                      document.querySelector("main") ||
                      document.body;
                    if (target) target.innerHTML = content.innerHTML;
                  });
                }
              } catch (e) {}
            }
          }
        } catch (e) {}
      })();
    </script>

    <meta property="og:type" content="website" />
    <meta
      property="og:title"
      content="Inventory | Alfa Motors World — Used Cars & Bikes in Bangalore"
    />
    <meta
      property="og:description"
      content="Browse Alfa Motors World's inventory of premium pre-owned cars and bikes in Bangalore. Filter by brand, year, price and more to find your next vehicle. Find used cars in Bangalore, compare certified pre-owned listings, and get a fast test-drive or finance options near you."
    />
    <meta
      property="og:url"
      content="https://www.alfamotorworld.com/https://www.alfamotorworld.com/inventory.html"
    />
    <meta
      property="og:image"
      content="https://www.alfamotorworld.com/assets/relogo.png"
    />
    <meta property="og:site_name" content="Alfa Motors World" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@alfamotorsworld" />
    <meta name="twitter:creator" content="@alfamotorsworld" />
    <meta
      name="twitter:title"
      content="Inventory | Alfa Motors World — Used Cars & Bikes in Bangalore"
    />
    <meta
      name="twitter:description"
      content="Browse Alfa Motors World's inventory of premium pre-owned cars and bikes in Bangalore. Filter by brand, year, price and more to find your next vehicle."
    />
    <meta
      name="twitter:image"
      content="https://www.alfamotorworld.com/assets/relogo.png"
    />

    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@graph": [
          {
            "@type": "Organization",
            "name": "Alfa Motors World",
            "url": "https://www.alfamotorworld.com",
            "logo": "https://www.alfamotorworld.com/assets/relogo.png",
            "sameAs": [
              "https://www.facebook.com/",
              "https://www.youtube.com/",
              "https://www.instagram.com/"
            ]
          },
          {
            "@type": "WebSite",
            "url": "https://www.alfamotorworld.com",
            "name": "Alfa Motors World",
            "potentialAction": {
              "@type": "SearchAction",
              "target": "https://www.alfamotorworld.com/https://www.alfamotorworld.com/inventory.html?search={search_term_string}",
              "query-input": "required name=search_term_string"
            }
          },
          {
            "@type": "BreadcrumbList",
            "itemListElement": [
              {
                "@type": "ListItem",
                "position": 1,
                "name": "Home",
                "item": "https://www.alfamotorworld.com/https://www.alfamotorworld.com/"
              },
              {
                "@type": "ListItem",
                "position": 2,
                "name": "Inventory",
                "item": "https://www.alfamotorworld.com/https://www.alfamotorworld.com/inventory.html"
              }
            ]
          },
          {
            "@type": "LocalBusiness",
            "name": "Alfa Motors World",
            "telephone": "+918210283582",
            "address": {
              "@type": "PostalAddress",
              "streetAddress": "No 97, 2, Bannerghatta Rd, opposite to D-Mart, Bohra Layout, Gottigere",
              "addressLocality": "Bengaluru",
              "addressRegion": "Karnataka",
              "postalCode": "560083",
              "addressCountry": "IN"
            },
            "url": "https://www.alfamotorworld.com"
          }
        ]
      }
    </script>
    <!-- Accessibility & performance helper: ensure images have alt, lazy loading and async decoding -->
    <script>
      (function () {
        function enhanceImages() {
          document.querySelectorAll("img").forEach(function (img) {
            try {
              var src = img.getAttribute("src") || "";
              var isDecor =
                /logo|icon|decor|sprite|background|arrow|dot|star|placeholder/i.test(
                  src
                ) ||
                img.classList.contains("logo-img") ||
                img.getAttribute("itemprop") === "logo";
              if (!img.hasAttribute("alt")) {
                if (isDecor) img.setAttribute("alt", "");
                else {
                  var name =
                    src.split("/").pop().split("?")[0].split(".")[0] || "image";
                  name = name.replace(/[-_]+/g, " ").replace(/\d+/g, "").trim();
                  img.setAttribute("alt", name || "image");
                }
              }
              if (!isDecor) {
                if (!img.hasAttribute("loading"))
                  img.setAttribute("loading", "lazy");
                if (!img.hasAttribute("decoding"))
                  img.setAttribute("decoding", "async");
              } else {
                if (!img.hasAttribute("decoding"))
                  img.setAttribute("decoding", "sync");
              }
            } catch (e) {}
          });
        }
        if (document.readyState === "loading")
          document.addEventListener("DOMContentLoaded", enhanceImages);
        else enhanceImages();
      })();
    </script>
    <link
      rel="sitemap"
      type="application/xml"
      title="Sitemap"
      href="/sitemap.xml"
    />
    <link rel="stylesheet" href="./global.css" />
    <link rel="stylesheet" href="./style.css" />
    <link rel="stylesheet" href="./inventory.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
  </head>

  <body>
    <div class="hero-section inventory-hero">
      <nav class="navbar">
        <a href="https://www.alfamotorworld.com/" class="logo-link">
          <div class="logo">
            <img
              src="./assets/okmotor.png"
              class="logo-img"
              alt="Alfa Motors World Logo"
              itemprop="logo"
            />
          </div>
        </a>
        <button class="mobile-menu-toggle"><i class="fas fa-bars"></i></button>
        <ul class="nav-links">
          <li>
            <a
              href="https://www.alfamotorworld.com/"
              aria-current="page"
              data-translate="Home"
              >Home</a
            >
          </li>

          <li class="mega-menu-trigger">
            <a
              href="https://www.alfamotorworld.com/inventory.html"
              data-translate="Vehicles for Sale"
              >Vehicles for Sale</a
            >
            <div class="mega-menu">
              <div class="mega-menu-content">
                <div class="mega-menu-column">
                  <h3>Categories</h3>
                  <a
                    href="https://www.alfamotorworld.com/inventory.html?category=suv"
                    >SUV</a
                  >
                  <a
                    href="https://www.alfamotorworld.com/inventory.html?category=sedan"
                    >Sedan</a
                  >
                  <a
                    href="https://www.alfamotorworld.com/inventory.html?category=hatchback"
                    >Hatchback</a
                  >
                  <a
                    href="https://www.alfamotorworld.com/inventory.html?category=luxury"
                    >Luxury</a
                  >
                  <a
                    href="https://www.alfamotorworld.com/inventory.html?category=electric"
                    >Electric</a
                  >
                </div>
                <div class="mega-menu-column">
                  <h3>Popular Brands</h3>
                  <a
                    href="https://www.alfamotorworld.com/inventory.html?brand=bmw"
                    >BMW</a
                  >
                  <a
                    href="https://www.alfamotorworld.com/inventory.html?brand=audi"
                    >Audi</a
                  >
                  <a
                    href="https://www.alfamotorworld.com/inventory.html?brand=mercedes"
                    >Mercedes</a
                  >
                  <a
                    href="https://www.alfamotorworld.com/inventory.html?brand=toyota"
                    >Toyota</a
                  >
                  <a
                    href="https://www.alfamotorworld.com/inventory.html?brand=honda"
                    >Honda</a
                  >
                </div>
              </div>
            </div>
          </li>
          <li>
            <a
              href="https://www.alfamotorworld.com/sell.html"
              data-translate="Sell Your Vehicle"
              >Sell Your Vehicle</a
            >
          </li>
          <li>
            <a
              href="https://www.alfamotorworld.com/happy-customers.html"
              data-translate="Happy Customers"
              >Happy Customers</a
            >
          </li>
          <li>
            <a
              href="https://www.alfamotorworld.com/finance.html"
              data-translate="Financing"
              >Financing</a
            >
          </li>
          <li>
            <a
              href="https://www.alfamotorworld.com/about.html"
              data-translate="About Us"
              >About Us</a
            >
          </li>
          <li>
            <a
              href="https://www.alfamotorworld.com/contact.html"
              data-translate="Contact"
              >Contact</a
            >
          </li>
        </ul>
        <div class="login-btn">
          <a href="https://www.alfamotorworld.com/getquote.html">
            <button data-translate="Get the Quote">Get the Quote</button>
          </a>
        </div>
      </nav>
      <section class="inventory-section full-inventory">
        <div class="inventory-content">
          <!-- Left sidebar filters -->
          <div class="sidebar-filters">
            <div class="filters-container">
              <h3 data-translate="Filters">Filters</h3>
              <div class="filter-group">
                <button
                  class="filter-btn"
                  data-filter="all"
                  data-translate="All Cars"
                >
                  All Cars
                </button>
              </div>

              <div class="filter-group">
                <button
                  class="filter-btn"
                  data-filter="price"
                  data-translate="Price"
                >
                  Price <i class="fas fa-chevron-down"></i>
                </button>
                <div class="filter-dropdown" id="price-dropdown">
                  <div class="price-range">
                    <div class="range-inputs">
                      <input
                        type="number"
                        id="min-price"
                        placeholder="Min"
                        min="0"
                      />
                      <span>to</span>
                      <input
                        type="number"
                        id="max-price"
                        placeholder="Max"
                        min="0"
                      />
                    </div>
                    <div class="price-presets">
                      <button
                        class="price-preset"
                        data-min="0"
                        data-max="50000"
                      >
                        Under 50K
                      </button>
                      <button
                        class="price-preset"
                        data-min="50000"
                        data-max="100000"
                      >
                        50K-1L
                      </button>
                      <button
                        class="price-preset"
                        data-min="100000"
                        data-max="200000"
                      >
                        1L-2L
                      </button>
                      <button
                        class="price-preset"
                        data-min="200000"
                        data-max="500000"
                      >
                        2L-5L
                      </button>
                      <button class="price-preset" data-min="500000">
                        5L+
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <div class="filter-group">
                <button
                  class="filter-btn"
                  data-filter="brand"
                  data-translate="Brand"
                >
                  Brand <i class="fas fa-chevron-down"></i>
                </button>
                <div class="filter-dropdown" id="brand-dropdown">
                  <div class="filter-options brand-options">
                    <button class="filter-option" data-brand="Audi">
                      Audi
                    </button>
                    <button class="filter-option" data-brand="Bentley">
                      Bentley
                    </button>
                    <button class="filter-option" data-brand="BMW">BMW</button>
                    <button class="filter-option" data-brand="Chevrolet">
                      Chevrolet
                    </button>
                    <button class="filter-option" data-brand="Chrysler">
                      Chrysler
                    </button>
                    <button class="filter-option" data-brand="Ferrari">
                      Ferrari
                    </button>
                    <button class="filter-option" data-brand="FIAT">
                      FIAT
                    </button>
                    <button class="filter-option" data-brand="Ford">
                      Ford
                    </button>
                    <button class="filter-option" data-brand="Honda">
                      Honda
                    </button>
                    <button class="filter-option" data-brand="Hyundai">
                      Hyundai
                    </button>
                    <button class="filter-option" data-brand="Isuzu">
                      Isuzu
                    </button>
                    <button class="filter-option" data-brand="Jaguar">
                      Jaguar
                    </button>
                    <button class="filter-option" data-brand="Jeep">
                      Jeep
                    </button>
                    <button class="filter-option" data-brand="Kia">Kia</button>
                    <button class="filter-option" data-brand="Lamborghini">
                      Lamborghini
                    </button>
                    <button class="filter-option" data-brand="Land Rover">
                      Land Rover
                    </button>
                    <button class="filter-option" data-brand="Lexus">
                      Lexus
                    </button>
                    <button class="filter-option" data-brand="Lotus">
                      Lotus
                    </button>
                    <button class="filter-option" data-brand="Maybach">
                      Maybach
                    </button>
                    <button class="filter-option" data-brand="Mazda">
                      Mazda
                    </button>
                    <button class="filter-option" data-brand="McLaren">
                      McLaren
                    </button>
                    <button class="filter-option" data-brand="Mercedes Benz">
                      Mercedes Benz
                    </button>
                    <button class="filter-option" data-brand="MINI">
                      MINI
                    </button>
                    <button class="filter-option" data-brand="Mitsubishi">
                      Mitsubishi
                    </button>
                    <button class="filter-option" data-brand="Nissan">
                      Nissan
                    </button>
                    <button class="filter-option" data-brand="Porsche">
                      Porsche
                    </button>
                    <button class="filter-option" data-brand="Rolls-Royce">
                      Rolls-Royce
                    </button>
                    <button class="filter-option" data-brand="SRT">SRT</button>
                    <button class="filter-option" data-brand="Suzuki">
                      Suzuki
                    </button>
                    <button class="filter-option" data-brand="Toyota">
                      Toyota
                    </button>
                    <button class="filter-option" data-brand="Volkswagen">
                      Volkswagen
                    </button>
                    <button class="filter-option" data-brand="Volvo">
                      Volvo
                    </button>
                    <button class="filter-option" data-brand="Tata">
                      Tata
                    </button>
                    <button class="filter-option" data-brand="Mahindra">
                      Mahindra
                    </button>
                    <button class="filter-option" data-brand="Renault">
                      Renault
                    </button>
                    <button class="filter-option" data-brand="Skoda">
                      Skoda
                    </button>
                    <button class="filter-option" data-brand="MG">MG</button>
                  </div>
                </div>
              </div>
              <div class="filter-group">
                <button
                  class="filter-btn"
                  data-filter="year"
                  data-translate="Year"
                >
                  Year <i class="fas fa-chevron-down"></i>
                </button>
                <div class="filter-dropdown" id="year-dropdown">
                  <div class="year-slider">
                    <div class="slider-container">
                      <input
                        type="range"
                        id="year-min"
                        min="2015"
                        max="2024"
                        value="2015"
                        step="1"
                      />
                      <input
                        type="range"
                        id="year-max"
                        min="2015"
                        max="2024"
                        value="2024"
                        step="1"
                      />
                    </div>
                    <div class="year-values">
                      <span id="year-min-value">2015</span>
                      <span>to</span>
                      <span id="year-max-value">2024</span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="filter-group">
                <button
                  class="filter-btn"
                  data-filter="km"
                  data-translate="KM Driven"
                >
                  KM Driven <i class="fas fa-chevron-down"></i>
                </button>
                <div class="filter-dropdown" id="km-dropdown">
                  <div class="km-slider">
                    <div class="slider-container">
                      <input
                        type="range"
                        id="km-min"
                        min="0"
                        max="50000"
                        value="0"
                        step="500"
                      />
                      <input
                        type="range"
                        id="km-max"
                        min="0"
                        max="50000"
                        value="50000"
                        step="500"
                      />
                    </div>
                    <div class="km-values">
                      <span id="km-min-value">0</span>
                      <span>to</span>
                      <span id="km-max-value">50,000</span>
                      <span>km</span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="filter-group">
                <button
                  class="filter-btn"
                  data-filter="owner"
                  data-translate="Ownership"
                >
                  Ownership <i class="fas fa-chevron-down"></i>
                </button>
                <div class="filter-dropdown" id="owner-dropdown">
                  <div class="filter-options ownership-options">
                    <button class="filter-option" data-owner="1">
                      1st Owner
                    </button>
                    <button class="filter-option" data-owner="2">
                      2nd Owner
                    </button>
                    <button class="filter-option" data-owner="3">
                      3+ Owner
                    </button>
                  </div>
                </div>
              </div>

              <div class="filter-group">
                <button
                  class="filter-btn"
                  data-filter="fuel"
                  data-translate="Fuel Type"
                >
                  Fuel Type <i class="fas fa-chevron-down"></i>
                </button>
                <div class="filter-dropdown" id="fuel-dropdown">
                  <div class="filter-options fuel-options">
                    <button class="filter-option" data-fuel="Petrol">
                      Petrol
                    </button>
                    <button class="filter-option" data-fuel="Electric">
                      Electric
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="car-grid-container">
            <div class="section-header">
              <div class="search-container">
                <div class="search-box">
                  <input
                    type="text"
                    id="inventory-search"
                    placeholder="Search Cars by brand or model..."
                  />
                  <button id="search-btn"><i class="fas fa-search"></i></button>
                </div>

                <div class="sort-dropdown">
                  <button class="sort-btn">
                    <span id="sort-text" data-translate="Sort: Default"
                      >Sort: Default</span
                    >
                    <i class="fas fa-chevron-down"></i>
                  </button>
                  <div class="sort-options">
                    <button class="sort-option" data-sort="default">
                      <span data-translate="Default">Default</span>
                    </button>
                    <button class="sort-option" data-sort="price-low">
                      <span data-translate="Price: Low to High"
                        >Price: Low to High</span
                      >
                    </button>
                    <button class="sort-option" data-sort="price-high">
                      <span data-translate="Price: High to Low"
                        >Price: High to Low</span
                      >
                    </button>
                    <button class="sort-option" data-sort="year-new">
                      <span data-translate="Year: Newest First"
                        >Year: Newest First</span
                      >
                    </button>
                    <button class="sort-option" data-sort="year-old">
                      <!-- 5-star social-like icon that opens review modal -->
                      <a
                        href="#leave-review"
                        class="footer-stars"
                        role="button"
                        title="Leave a review"
                        aria-label="Leave a review"
                      >
                        <i
                          class="fa-solid fa-star"
                          style="color: #f59e0b; margin-right: 2px"
                        ></i>
                        <i
                          class="fa-solid fa-star"
                          style="color: #f59e0b; margin-right: 2px"
                        ></i>
                        <i
                          class="fa-solid fa-star"
                          style="color: #f59e0b; margin-right: 2px"
                        ></i>
                        <i
                          class="fa-solid fa-star"
                          style="color: #f59e0b; margin-right: 2px"
                        ></i>
                        <i class="fa-solid fa-star" style="color: #f59e0b"></i>
                      </a>
                      <span data-translate="Year: Oldest First"
                        >Year: Oldest First</span
                      >
                    </button>
                  </div>
                </div>
              </div>
              <h2 id="filtered-count">0 Cars Available</h2>
            </div>
            <div class="brand-logos-container">
              <div class="brand-logos">
                <div class="brand-logo" data-brand="Audi">
                  <img
                    src="https://images.seeklogo.com/logo-png/1/2/audi-logo-png_seeklogo-13435.png"
                    alt="Audi"
                  />
                </div>
                <div class="brand-logo" data-brand="Chevrolet">
                  <img
                    src="https://brandlogos.net/wp-content/uploads/2021/12/chevrolet-brandlogo.net_.png"
                    alt="Chevrolet"
                  />
                </div>
                <div class="brand-logo" data-brand="BMW">
                  <img
                    src="https://pngimg.com/uploads/bmw_logo/bmw_logo_PNG19707.png"
                    alt="BMW"
                  />
                </div>
                <div class="brand-logo" data-brand="Chrysler">
                  <img
                    src="https://cdn.freebiesupply.com/logos/large/2x/chrysler-2-logo-png-transparent.png"
                    alt="Chrysler"
                  />
                </div>
                <div class="brand-logo" data-brand="Ford">
                  <img
                    src="https://brandlogos.net/wp-content/uploads/2014/07/ford-logo.png"
                    alt="Ford"
                  />
                </div>
                <div class="brand-logo" data-brand="Honda">
                  <img
                    src="https://cdn.pixabay.com/photo/2016/08/15/18/18/honda-1596081_640.png"
                    alt="Honda"
                  />
                </div>
                <div class="brand-logo" data-brand="Hyundai">
                  <img
                    src="https://media2.giphy.com/media/v1.Y2lkPTZjMDliOTUyODdqbXN0eTcxNWZjeWZzYjR5OTBzODVxa2NzYW94em1rNGpvdmdoYyZlcD12MV9zdGlja2Vyc19zZWFyY2gmY3Q9cw/e5kMlujdIrxSCVMF65/source.gif"
                    alt="Hyundai"
                  />
                </div>
                <div class="brand-logo" data-brand="Jeep">
                  <img
                    src="https://i.pinimg.com/originals/30/22/ae/3022ae00646508dcccb234227c141ba3.gif"
                    alt="Jeep"
                  />
                </div>
                <div class="brand-logo" data-brand="Jaguar">
                  <img
                    src="https://media4.giphy.com/avatars/jaguarrussia/BGXiUOjrFWxC.gif"
                    alt="Jaguar"
                  />
                </div>
                <div class="brand-logo" data-brand="Kia">
                  <img
                    src="https://media2.giphy.com/media/gRism8S8DBRWAiAroL/source.gif"
                    alt="Kia"
                  />
                </div>
                <div class="brand-logo" data-brand="Land Rover">
                  <img
                    src="https://car-logos.b-cdn.net/wp-content/uploads/2023/04/land-rover-logo-1986-present-scaled.webp"
                    alt="Land Rover"
                  />
                </div>
                <div class="brand-logo" data-brand="Lexus">
                  <img
                    src="https://upload.wikimedia.org/wikipedia/en/thumb/d/d1/Lexus_division_emblem.svg/2560px-Lexus_division_emblem.svg.png"
                    alt="Lexus"
                  />
                </div>
                <div class="brand-logo" data-brand="Mercedes Benz">
                  <img
                    src="https://images.seeklogo.com/logo-png/9/2/mercedes-benz-logo-png_seeklogo-91082.png"
                    alt="Mercedes Benz"
                  />
                </div>
                <div class="brand-logo" data-brand="Mitsubishi">
                  <img
                    src="https://images.seeklogo.com/logo-png/24/2/mitsubishi-motors-logo-png_seeklogo-247139.png"
                    alt="Mitsubishi"
                  />
                </div>
                <div class="brand-logo" data-brand="Mazda">
                  <img
                    src="https://upload.wikimedia.org/wikipedia/en/thumb/1/18/Mazda_logo_with_emblem.svg/250px-Mazda_logo_with_emblem.svg.png"
                    alt="Mazda"
                  />
                </div>
                <div class="brand-logo" data-brand="Nissan">
                  <img
                    src="https://cdn.freebiesupply.com/logos/large/2x/nissan-6-logo-png-transparent.png"
                    alt="Nissan"
                  />
                </div>
                <div class="brand-logo" data-brand="Porsche">
                  <img
                    src="https://brandlogos.net/wp-content/uploads/2021/10/porsche-logo-300x300.png"
                    alt="Porsche"
                  />
                </div>
                <div class="brand-logo" data-brand="Toyota">
                  <img
                    src="https://cdn.freebiesupply.com/logos/thumbs/2x/toyota-logo.png"
                    alt="Toyota"
                  />
                </div>
                <div class="brand-logo" data-brand="Volkswagen">
                  <img
                    src="https://upload.wikimedia.org/wikinews/en/d/d3/Volkswagen_logo.png"
                    alt="Volkswagen"
                  />
                </div>
                <div class="brand-logo" data-brand="Volvo">
                  <img src="https://pngimg.com/d/volvo_PNG64.png" alt="Volvo" />
                </div>
                <div class="brand-logo" data-brand="Tata">
                  <img
                    src="https://cdn.freebiesupply.com/logos/large/2x/tata-football-academy-de-jamshedpur-logo-black-and-white.png"
                    alt="Tata"
                  />
                </div>
                <div class="brand-logo" data-brand="Mahindra">
                  <img
                    src="https://car-logos.b-cdn.net/wp-content/uploads/2023/04/mahindra-logo-2021-present-1024x742.webp"
                    alt="Mahindra"
                  />
                </div>
                <div class="brand-logo" data-brand="Renault">
                  <img
                    src="https://pngimg.com/d/renault_PNG40.png"
                    alt="Renault"
                  />
                </div>
                <div class="brand-logo" data-brand="Skoda">
                  <img
                    src="https://cdn.worldvectorlogo.com/logos/skoda-6.svg"
                    alt="Skoda"
                  />
                </div>
                <div class="brand-logo" data-brand="MG">
                  <img
                    src="https://cdn.freebiesupply.com/logos/large/2x/mg-logo-svg-vector.svg"
                    alt="MG"
                  />
                </div>
                <div class="brand-logo" data-brand="FIAT">
                  <img
                    src="https://www.pngplay.com/wp-content/uploads/6/Fiat-Icon-Background-PNG-Image.png"
                    alt="FIAT"
                  />
                </div>
                <div class="brand-logo" data-brand="Bentley">
                  <img
                    src="https://www.carlogos.org/car-logos/bentley-logo-2002-download.png"
                    alt="Bentley"
                  />
                </div>
                <div class="brand-logo" data-brand="Ferrari">
                  <img
                    src="https://cdn.freebiesupply.com/logos/large/2x/ferrari-ges-logo-png-transparent.png"
                    alt="Ferrari"
                  />
                </div>
                <div class="brand-logo" data-brand="Lamborghini">
                  <img
                    src="https://pngimg.com/d/lamborghini_PNG10709.png"
                    alt="Lamborghini"
                  />
                </div>
                <div class="brand-logo" data-brand="Lotus">
                  <img src="https://pngimg.com/d/lotus_PNG50.png" alt="Lotus" />
                </div>
                <div class="brand-logo" data-brand="McLaren">
                  <img
                    src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSO_tLzaDh5AOxieWcPp2a5RyzYoCKRlil0rg&s"
                    alt="McLaren"
                  />
                </div>
                <div class="brand-logo" data-brand="Rolls-Royce">
                  <img
                    src="https://pngimg.com/d/rolls_royce_PNG27.png"
                    alt="Rolls-Royce"
                  />
                </div>
                <div class="brand-logo" data-brand="SRT">
                  <img
                    src="https://images.seeklogo.com/logo-png/25/2/srt-hellcat-logo-png_seeklogo-259596.png"
                    alt="SRT"
                  />
                </div>
                <div class="brand-logo" data-brand="Suzuki">
                  <img
                    src="https://static.cdnlogo.com/logos/s/15/suzuki.png"
                    alt="Suzuki"
                  />
                </div>
                <div class="brand-logo" data-brand="Maybach">
                  <img
                    src="https://cdn.freebiesupply.com/logos/large/2x/maybach-logo-png-transparent.png"
                    alt="Maybach"
                  />
                </div>
                <div class="brand-logo" data-brand="Isuzu">
                  <img src="https://pngimg.com/d/isuzu_PNG23.png" alt="Isuzu" />
                </div>
              </div>
            </div>
            <div class="car-grid"></div>
          </div>
        </div>
      </section>
    </div>

    <footer class="footer" itemscope itemtype="https://schema.org/WPFooter">
      <div class="footer-content">
        <div
          class="footer-section"
          itemscope
          itemtype="https://schema.org/Organization"
        >
          <div class="logo">
            <img
              src="./assets/okmotor.png"
              alt="Alfa Motors World Logo"
              width="120"
              height="120"
              itemprop="logo"
            />
          </div>
          <p
            itemprop="description"
            data-translate="The best second-hand car showroom in Bangalore for luxury and premium cars."
          >
            The best second-hand car showroom in Bangalore for luxury and
            premium cars.
          </p>
          <a
            href="#leave-review"
            class="footer-stars"
            role="button"
            title="Leave a review"
            aria-label="Leave a review"
          >
            <i
              class="fa-solid fa-star"
              style="color: #f59e0b; margin-right: 2px"
            ></i>
            <i
              class="fa-solid fa-star"
              style="color: #f59e0b; margin-right: 2px"
            ></i>
            <i
              class="fa-solid fa-star"
              style="color: #f59e0b; margin-right: 2px"
            ></i>
            <i
              class="fa-solid fa-star"
              style="color: #f59e0b; margin-right: 2px"
            ></i>
            <i class="fa-solid fa-star" style="color: #f59e0b"></i>
          </a>
          <div class="social-icons">
            <a
              href="https://www.facebook.com/share/1Ao18FYX8e/"
              aria-label="Visit our Facebook page"
              ><i class="fa-brands fa-facebook-f" style="color: #0400ff"></i
            ></a>
            <a
              href="https://www.instagram.com/Carbuilders41?igsh=ZDk5M3NxdmI1Ymhp"
              aria-label="Visit our Instagram profile"
              ><img
                src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png"
                style="width: 20px"
            /></a>
            <a
              href="https://wa.me/919036818492"
              aria-label="Chat with us on WhatsApp"
              ><i class="fa-brands fa-whatsapp" style="color: #00a9a1"></i
            ></a>
            <a
              href="https://youtube.com/@Carbuilders-vo2nm?feature=shared"
              aria-label="Watch on Youtube"
              ><i class="fa-brands fa-youtube" style="color: #fa0000"></i
            ></a>
          </div>
        </div>
        <div class="footer-section">
          <h3>Quick Links</h3>
          <ul>
            <li>
              <a
                href="https://www.alfamotorworld.com/"
                aria-label="Home page"
                data-translate="Home"
                >Home</a
              >
            </li>
            <li>
              <a
                href="https://www.alfamotorworld.com/inventory.html"
                aria-label="Browse our Car inventory"
                data-translate="Buy Car"
                >Buy Car</a
              >
            </li>
            <li>
              <a
                href="https://www.alfamotorworld.com/sell.html"
                aria-label="Sell your Car"
                data-translate="Sell Your Car"
                >Sell Your Car</a
              >
            </li>
            <li>
              <a
                href="https://www.alfamotorworld.com/about.html"
                aria-label="About Alfa Motors World"
                data-translate="About Us"
                >About Us</a
              >
            </li>
            <li>
              <a
                href="https://www.alfamotorworld.com/contact.html"
                aria-label="Contact us"
                data-translate="Contact"
                >Contact</a
              >
            </li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Resources</h3>
          <ul>
            <li>
              <a
                href="https://www.alfamotorworld.com/finance.html"
                aria-label="Finance options"
                data-translate="Finance"
                >Finance</a
              >
            </li>
            <li>
              <a
                href="https://www.alfamotorworld.com/locations.html"
                aria-label="Our Locations"
                data-translate="Our Locations"
                >Our Locations</a
              >
            </li>
          </ul>
        </div>
        <div
          class="footer-section"
          itemscope
          itemtype="https://schema.org/PostalAddress"
        >
          <h3>Contact Us</h3>
          <p itemprop="streetAddress">
            <i class="fas fa-map-marker-alt" aria-hidden="true"></i> No 97, 2,
            Bannerghatta Rd, opposite to D-Mart, Bohra Layout, Gottigere,
            Bengaluru, Karnataka 560083
          </p>
          <p>
            <i class="fas fa-phone" aria-hidden="true"></i>
            <span itemprop="telephone">+91 9036818492</span>
          </p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>
          &copy; <span itemprop="copyrightYear">2023</span>
          <span itemprop="copyrightHolder">Alfa Motors World</span>.
          <span data-translate="All rights reserved."
            >All rights reserved.</span
          >
        </p>
        <a
          href="https://www.pixelatenest.com"
          style="color: #a9a9a9"
          aria-label="Website designed by Pixelate Nest"
          >Designed By Pixelate Nest</a
        >
      </div>
    </footer>
    <script>
      // Check for stored language preference when page loads
      document.addEventListener("DOMContentLoaded", function () {
        const translations = {
          en: {
            "Alfa Motors World | Premium Pre-Owned Motorcycles in India":
              "Alfa Motors World | Premium Pre-Owned Motorcycles in India",
            Home: "Home",
            Updates: "Updates",
            "Buy Car": "Buy Car",
            "Sell Your Car": "Sell Your Car",
            "About Us": "About Us",
            Contact: "Contact",
            "Get the Quote": "Get the Quote",
            Filters: "Filters",
            "All Cars": "All Cars",
            Price: "Price",
            Brand: "Brand",
            Year: "Year",
            "KM Driven": "KM Driven",
            Ownership: "Ownership",
            "Fuel Type": "Fuel Type",
            "Sort: Default": "Sort: Default",
            Default: "Default",
            "Price: Low to High": "Price: Low to High",
            "Price: High to Low": "Price: High to Low",
            "Year: Newest First": "Year: Newest First",
            "Year: Oldest First": "Year: Oldest First",
            "Under 50K": "Under 50K",
            "50K-1L": "50K-1L",
            "1L-2L": "1L-2L",
            "2L-5L": "2L-5L",
            "5L+": "5L+",
            "1st Owner": "1st Owner",
            "2nd Owner": "2nd Owner",
            "3+ Owner": "3+ Owner",
            Petrol: "Petrol",
            Electric: "Electric",
            "Showing results for:": "Showing results for:",
            "Clear search": "Clear search",
            "Cars Available": "Cars Available",
            "Fuel Type": "Fuel Type",
            "Sort: Default": "Sort: Default",
            "Price: Low to High": "Price: Low to High",
            "Price: High to Low": "Price: High to Low",
            "Year: Newest First": "Year: Newest First",
            "Year: Oldest First": "Year: Oldest First",
            "Under 50K": "Under 50K",
            "50K-1L": "50K-1L",
          },
          hi: {
            "Alfa Motors World | Premium Pre-Owned Motorcycles in India":
              "बाइक बिल्डर्स | भारत में प्रीमियम सेकेंड हैंड बाइक्स",
            Home: "होम",
            Updates: "अपडेट्स",
            "Buy Car": "बाइक खरीदें",
            "Sell Your Car": "बाइक बेचें",
            "About Us": "हमारे बारे में",
            Contact: "संपर्क करें",
            "Get the Quote": "कीमत पता करें",
            Filters: "फिल्टर",
            "All Cars": "सभी बाइक",
            Price: "कीमत",
            Brand: "ब्रांड",
            Year: "वर्ष",
            "KM Driven": "किलोमीटर",
            Ownership: "मालिकाना हक",
            "Fuel Type": "ईंधन प्रकार",
            "Sort: Default": "क्रम: डिफ़ॉल्ट",
            Default: "डिफ़ॉल्ट",
            "Price: Low to High": "कीमत: कम से ज्यादा",
            "Price: High to Low": "कीमत: ज्यादा से कम",
            "Year: Newest First": "वर्ष: नए से पुराने",
            "Year: Oldest First": "वर्ष: पुराने से नए",
            "Under 50K": "50K से कम",
            "50K-1L": "50K-1L",
            "1L-2L": "1L-2L",
            "2L-5L": "2L-5L",
            "5L+": "5L+",
            "1st Owner": "पहला मालिक",
            "2nd Owner": "दूसरा मालिक",
            "3+ Owner": "तीसरा या अधिक मालिक",
            Petrol: "पेट्रोल",
            Electric: "इलेक्ट्रिक",
            "Showing results for:": "खोज परिणाम:",
            "Clear search": "खोज साफ करें",
            "Cars Available": "बाइक उपलब्ध",
            "Fuel Type": "ईंधन प्रकार",
            "Sort: Default": "क्रम: डिफ़ॉल्ट",
            "Price: Low to High": "कीमत: कम से ज्यादा",
            "Price: High to Low": "कीमत: ज्यादा से कम",
            "Year: Newest First": "वर्ष: नए से पुराने",
            "Year: Oldest First": "वर्ष: पुराने से नए",
            "Under 50K": "50K से कम",
            "50K-1L": "50K-1L",
          },
        };

        const preferredLanguage =
          localStorage.getItem("preferredLanguage") || "en";

        if (preferredLanguage !== "en") {
          document.body.classList.add("hindi-font");
          const elements = document.querySelectorAll("[data-translate]");
          elements.forEach((element) => {
            const key = element.getAttribute("data-translate");
            if (
              translations[preferredLanguage] &&
              translations[preferredLanguage][key]
            ) {
              element.textContent = translations[preferredLanguage][key];
            }
          });
        }
      });
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // API Configuration - update this for production
        const API_BASE_URL =
          window.location.hostname === "localhost"
            ? "https://alfa-motors-5yfh.vercel.app"
            : "https://alfa-motors-5yfh.vercel.app"; // Replace with your Vercel backend URL

        // Helper function to get the correct image URL
        function getImageUrl(imagePath) {
          // Normalize different stored shapes: array, JSON string, single filename or full URL
          if (!imagePath) return "assets/placeholder.png";

          // If passed an array, use the first element
          if (Array.isArray(imagePath) && imagePath.length > 0) imagePath = imagePath[0];

          // If it's a JSON-encoded array string, try to parse
          if (typeof imagePath === "string") {
            const raw = imagePath.trim();
            if (raw.startsWith("[")) {
              try {
                const parsed = JSON.parse(raw);
                if (Array.isArray(parsed) && parsed.length) imagePath = parsed[0];
              } catch (e) {}
            }
          }

          if (typeof imagePath !== "string") return "assets/placeholder.png";
          const p = imagePath.trim();

          // Full URLs or data URIs
          if (p.startsWith("http://") || p.startsWith("https://") || p.startsWith("data:")) return p;

          // Remove any leading slashes
          const cleaned = p.replace(/^\/+/, "");

          // If it's an assets path, return as-is
          if (cleaned.startsWith("assets/")) return cleaned;

          // If already contains carimages/, strip it and construct URL
          const filename = cleaned.startsWith("carimages/") ? cleaned.replace(/^carimages\//, "") : cleaned;

          return `${API_BASE_URL}/carimages/${filename}`;
        }

        // Normalize photos field from DB: may be an array, JSON string, or single filename
        function normalizePhotos(photosField) {
          if (!photosField) return [];
          if (Array.isArray(photosField)) return photosField;
          if (typeof photosField === 'string') {
            const raw = photosField.trim();
            if (raw.startsWith('[')) {
              try {
                const parsed = JSON.parse(raw);
                if (Array.isArray(parsed)) return parsed;
              } catch (e) {}
            }
            if (raw.includes(',')) return raw.split(',').map(s => s.trim()).filter(Boolean);
            return [raw];
          }
          return [];
        }

        let allCars = [];
        let currentFilters = {
          brand: null,
          minPrice: 0,
          maxPrice: Infinity,
          minYear: 0,
          maxYear: 2024,
          minKm: 0,
          maxKm: Infinity,
          owner: null,
          fuel: null,
        };
        let currentSort = "default"; // Declare this ONCE at the top level

        function loadCars() {
          // Use the SQL-backed API endpoint
          fetch(`${API_BASE_URL}/api/cars-sql`)
            .then((response) => {
              if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
              }
              return response.json();
            })
            .then((data) => {
              console.log("Loaded cars data:", data); // Inspect the data structure

              // Backends sometimes return an array directly, or an object like { success: true, data: [...] }.
              // Accept both shapes for robustness.
              let carsArray = [];
              if (Array.isArray(data)) {
                carsArray = data;
              } else if (data && Array.isArray(data.data)) {
                carsArray = data.data;
              }

              if (carsArray.length > 0) {
                allCars = carsArray.map((car) => ({
                  ...car,
                  // Normalize photos column so downstream code always gets an array
                  photos: normalizePhotos(car.photos),
                  make: car.make || car.brand || car.make, // support both keys
                  brand: (car.make || car.brand || "").toString().trim(), // Ensure brand is trimmed
                }));
                applyAllFilters();
              } else {
                showErrorMessage("No cars found or invalid data format");
              }
            })
            .catch((error) => {
              console.error("Error loading cars:", error);
              showErrorMessage(`Failed to load cars: ${error.message}`);
            });
        }

        function showErrorMessage(message = "Failed to load cars") {
          const carGrid = document.querySelector(".car-grid");
          if (!carGrid) {
            console.error("Could not find .car-grid element");
            return;
          }

          carGrid.innerHTML = `
    <div class="error-message" style="grid-column: 1 / -1; text-align: center; padding: 60px 20px;">
      <i class="fas fa-exclamation-triangle" style="font-size: 4rem; color: #ff6b00; margin-bottom: 20px;"></i>
      <h3 style="color: #666; margin-bottom: 10px;">${message}</h3>
      <p style="color: #999; margin-bottom: 20px;">Please check your connection and try again.</p>
      <button onclick="location.reload()" style="background: #ff6b00; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
        Retry
      </button>
    </div>
  `;
        }

        // Initialize sort dropdown function - moved to top level
        function initSortDropdown() {
          const sortBtn = document.querySelector(".sort-btn");
          const sortOptions = document.querySelector(".sort-options");

          if (!sortBtn || !sortOptions) return; // Safety check

          sortBtn.addEventListener("click", function (e) {
            e.stopPropagation();
            sortOptions.style.display =
              sortOptions.style.display === "block" ? "none" : "block";
          });

          document.addEventListener("click", function (e) {
            if (!e.target.closest(".sort-dropdown")) {
              sortOptions.style.display = "none";
            }
          });

          document.querySelectorAll(".sort-option").forEach((option) => {
            option.addEventListener("click", function () {
              const sortType = this.dataset.sort;
              currentSort = sortType; // This now references the top-level variable

              // Update the sort button text
              document.getElementById(
                "sort-text"
              ).textContent = `Sort: ${this.textContent}`;

              // Close the dropdown
              sortOptions.style.display = "none";

              // Apply filters with new sorting
              applyAllFilters();
            });
          });
        }
        function initImageSliders() {
          document.querySelectorAll(".car-slider").forEach((slider) => {
            const images = slider.querySelector(".slider-images");
            const dots = slider.querySelectorAll(".dot");
            const prevBtn = slider.querySelector(".slider-prev");
            const nextBtn = slider.querySelector(".slider-next");
            let currentIndex = 0;

            function showSlide(index) {
              images.style.transform = `translateX(-${index * 100}%)`;
              dots.forEach((dot) => dot.classList.remove("active"));
              dots[index].classList.add("active");
              currentIndex = index;
            }

            // Initialize first slide
            showSlide(0);

            dots.forEach((dot) => {
              dot.addEventListener("click", () => {
                showSlide(parseInt(dot.dataset.index));
              });
            });

            prevBtn.addEventListener("click", () => {
              const newIndex = (currentIndex - 1 + dots.length) % dots.length;
              showSlide(newIndex);
            });

            nextBtn.addEventListener("click", () => {
              const newIndex = (currentIndex + 1) % dots.length;
              showSlide(newIndex);
            });
          });
        }

        function displayCars(cars) {
          const carGrid = document.querySelector(".car-grid");
          if (!carGrid) {
            console.error("Car grid element not found");
            return;
          }

          carGrid.innerHTML = "";

          console.log("Displaying cars:", cars);

          if (cars.length === 0) {
            showNoCarsMessage();
            return;
          }

          cars.forEach((car) => {
            const carCard = createCarCard(car);
            carGrid.appendChild(carCard);
          });

          // Translate dynamic content in the car grid according to stored preference
          try {
            const preferred = localStorage.getItem("preferredLanguage") || "en";
            if (preferred && typeof translatePage === "function") {
              const dynamicElems = carGrid.querySelectorAll("[data-translate]");
              dynamicElems.forEach((el) => {
                const key = el.getAttribute("data-translate");
                if (
                  translations &&
                  translations[preferred] &&
                  translations[preferred][key]
                ) {
                  el.textContent = translations[preferred][key];
                }
              });
            }
          } catch (e) {}

          initImageSliders();
          addCarCardClickListeners();
        }

        function createCarCard(car) {
          const carCard = document.createElement("div");
          carCard.className = "car-card";

          // Set data attributes for filtering
          carCard.dataset.brand = car.make || "";
          carCard.dataset.sellingPrice = car.sellingPrice || 0;
          carCard.dataset.year = car.modelYear || new Date().getFullYear();
          carCard.dataset.km = car.kmDriven || 0;
          carCard.dataset.owner = car.ownership || "1";
          carCard.dataset.fuel = car.fuelType || "Petrol";

          const statusClass =
            car.status === "Available"
              ? "status-available"
              : car.status === "Sold Out"
              ? "status-sold"
              : car.status === "Coming Soon"
              ? "status-coming-soon"
              : "status-available";

          // Create image slider if multiple images exist
          let imageHTML = "";
          if (Array.isArray(car.photos) && car.photos.length > 0) {
            if (car.photos.length > 1) {
              // Multiple images - create slider
              imageHTML = `
        <div class="car-slider">
          <div class="slider-images">
            ${car.photos
              .map(
                (img) => `
              <img src="${getImageUrl(img)}" 
                   alt="${car.make || car.brand || ""} ${car.model || ""}"
                   onerror="this.onerror=null;this.src='assets/placeholder.png'">
            `
              )
              .join("")}
          </div>
          <div class="slider-dots">
            ${car.photos
              .map(
                (_, index) => `
              <span class="dot" data-index="${index}"></span>
            `
              )
              .join("")}
          </div>
          <button class="slider-prev">&lt;</button>
          <button class="slider-next">&gt;</button>
        </div>
      `;
            } else {
              // Single image
              imageHTML = `
  <img src="${getImageUrl(car.photos[0])}" 
    alt="${car.make || car.brand || ""} ${car.model || ""}" 
    onerror="this.onerror=null;this.src='assets/placeholder.png'">
  `;
            }
          } else {
            // No images or photos not an array
            imageHTML = "";
          }

          // Pass car data for popup
          carCard.dataset.CarData = JSON.stringify(car);

          carCard.innerHTML = `
  <div class="image-container">
  ${imageHTML}
  <div class="status-badge ${statusClass}" data-translate="${
            car.status || "Available"
          }">${car.status || "Available"}</div>
    </div>
    <div class="card-content">
      <h3>${car.make || "Unknown Brand"} ${car.model || "Unknown Model"}</h3>
      <span class="model">${
        car.modelYear || new Date().getFullYear()
      } Model</span>
      <div class="details">
        <div class="detail-item">
          <i class="fas fa-tachometer-alt"></i>
          <span>${(car.kmDriven || 0).toLocaleString()} km</span>
        </div>
        <div class="detail-item">
          <i class="fas fa-user"></i>
          <span>${formatOwnership(car.ownership || "1")}</span>
        </div>
        <div class="detail-item">
          <i class="fas fa-gas-pump"></i>
          <span>${car.fuelType || "Petrol"}</span>
        </div>
        <div class="detail-item">
          <i class="fas fa-calendar-alt"></i>
          <span>${formatAge(car.daysOld || 0)}</span>
        </div>
      </div>
      <div class="price-container">
        <div class="price">₹${(car.sellingPrice || 0).toLocaleString()}</div>
        
        <div class="button-group">
          <button class="contact-btn" data-translate="Contact Seller" ${
            car.status !== "Available" ? "disabled" : ""
          }>
            Contact Seller
          </button>
          <button class="view-details-btn" data-translate="View Details" ${
            car.status !== "Available" ? "disabled" : ""
          }>
            View Details
          </button>
        </div>
      </div>
    </div>
  `;
          return carCard;
        }

        // Helper function to format ownership
        function formatOwnership(owner) {
          if (owner === "1" || owner.includes("1st")) return "1st Owner";
          if (owner === "2" || owner.includes("2nd")) return "2nd Owner";
          if (owner === "3" || owner.includes("3+") || owner.includes("3rd"))
            return "3+ Owner";
          return owner;
        }

        function addCarCardClickListeners() {
          document.querySelectorAll(".car-card").forEach((card) => {
            const viewDetailsBtn = card.querySelector(".view-details-btn");
            const contactBtn = card.querySelector(".contact-btn");

            // Navigate to vehicledetail page with encoded car data
            function goToDetails(e) {
              if (e && e.stopPropagation) e.stopPropagation();
              try {
                const CarData = JSON.parse(card.dataset.CarData || "{}");
                const q = encodeURIComponent(JSON.stringify(CarData));
                window.location.href = `vehicledetail.html?car=${q}`;
              } catch (err) {
                console.error("Failed to open details", err);
              }
            }

            if (viewDetailsBtn && !viewDetailsBtn.disabled) {
              viewDetailsBtn.addEventListener("click", goToDetails);
            }

              // make the whole card clickable (but preserve button and slider behavior)
              card.addEventListener("click", (e) => {
                // ignore clicks originating from buttons, slider controls or dots (they have their own handlers)
                const target = e.target;
                if (
                  !target ||
                  target.closest(".contact-btn") ||
                  target.closest(".view-details-btn") ||
                  target.closest(".slider-prev") ||
                  target.closest(".slider-next") ||
                  target.closest(".dot") ||
                  target.closest(".slider-images") ||
                  target.closest(".car-slider")
                )
                  return;
                goToDetails(e);
              });

            if (contactBtn && !contactBtn.disabled) {
              contactBtn.addEventListener("click", (e) => {
                e.stopPropagation();
                window.location.href =
                  "https://www.alfamotorworld.com/contact.html";
              });
            }
          });
        }
        // Show Car details popup
        function showCarPopup(car) {
          const popup = document.querySelector(".Car-popup-overlay");
          popup.style.display = "flex";
          // Set main car image (first photo or default)
          const mainImg = document.getElementById("popup-Car-image");
          // Carousel logic
          let currentIndex = 0;
          const thumbnailsContainer = document.getElementById(
            "popup-Car-thumbnails"
          );
          const carouselPrev = document.getElementById("carousel-prev");
          const carouselNext = document.getElementById("carousel-next");
          thumbnailsContainer.innerHTML = "";
          let images =
            car.photos && car.photos.length > 0
              ? car.photos
              : ["assets/owner.png"];

          function showImage(idx) {
            currentIndex = idx;
            mainImg.src = getImageUrl(images[idx]);
            mainImg.alt = `${car.make} ${car.model} ${idx + 1}`;
            Array.from(thumbnailsContainer.children).forEach((thumb, i) => {
              thumb.style.border = i === idx ? "2px solid #3b82f6" : "none";
            });
          }
          images.forEach((img, idx) => {
            const thumb = document.createElement("img");
            thumb.src = getImageUrl(img);
            thumb.alt = `${car.make} ${car.model} ${idx + 1}`;
            thumb.style.width = "60px";
            thumb.style.height = "40px";
            thumb.style.objectFit = "cover";
            thumb.style.cursor = "pointer";
            thumb.style.borderRadius = "6px";
            thumb.onclick = () => showImage(idx);
            thumbnailsContainer.appendChild(thumb);
          });
          showImage(0);
          carouselPrev.onclick = () =>
            showImage((currentIndex - 1 + images.length) % images.length);
          carouselNext.onclick = () =>
            showImage((currentIndex + 1) % images.length);
          // Populate other car details
          document.getElementById("popup-Car-title").textContent = `${
            car.make || ""
          } ${car.model || ""}`;
          document.getElementById("popup-Car-model").textContent = `${
            car.modelYear || ""
          } Model`;
          document.getElementById("popup-Car-km").textContent = `${(
            car.kmDriven || 0
          ).toLocaleString()} km`;
          document.getElementById("popup-Car-owner").textContent =
            typeof formatOwnership === "function"
              ? formatOwnership(car.ownership || "1")
              : car.ownership || "1";
          document.getElementById("popup-Car-fuel").textContent =
            car.fuelType || "Petrol";
          document.getElementById("popup-Car-age").textContent =
            typeof formatAge === "function"
              ? formatAge(car.daysOld || 0)
              : car.daysOld || 0;
          document.getElementById("popup-Car-price").textContent = `₹${(
            car.sellingPrice || 0
          ).toLocaleString()}`;

          // Contact Seller button navigation
          const contactBtn = popup.querySelector(".contact-btn");
          contactBtn.onclick = () => {
            window.location.href =
              "https://www.alfamotorworld.com/contact.html";
          };

          // Show popup
          popup.classList.add("active");
          document.body.style.overflow = "hidden";
          initPopupClose();
        }

        function initPopupSlider() {
          const slider = document.querySelector(".popup-slider");
          if (!slider) return;

          const images = slider.querySelector(".popup-slider-images");
          const dots = slider.querySelectorAll(".popup-dot");
          const prevBtn = slider.querySelector(".popup-slider-prev");
          const nextBtn = slider.querySelector(".popup-slider-next");
          let currentIndex = 0;

          function showSlide(index) {
            images.style.transform = `translateX(-${index * 100}%)`;
            dots.forEach((dot) => dot.classList.remove("active"));
            if (dots[index]) dots[index].classList.add("active");
            currentIndex = index;
          }

          // Initialize first slide
          showSlide(0);

          // Dot click event
          dots.forEach((dot) => {
            dot.addEventListener("click", () => {
              showSlide(parseInt(dot.dataset.index));
            });
          });

          // Previous button
          prevBtn.addEventListener("click", () => {
            const newIndex = (currentIndex - 1 + dots.length) % dots.length;
            showSlide(newIndex);
          });

          // Next button
          nextBtn.addEventListener("click", () => {
            const newIndex = (currentIndex + 1) % dots.length;
            showSlide(newIndex);
          });
        }

        // Close popup functionality
        function initPopupClose() {
          const popup = document.querySelector(".Car-popup-overlay");
          const closeBtn = document.querySelector(".close-popup");
          closeBtn.addEventListener("click", closePopup);
          popup.addEventListener("click", (e) => {
            if (e.target === popup) {
              closePopup();
            }
          });
          document.addEventListener("keydown", (e) => {
            if (e.key === "Escape") {
              closePopup();
            }
          });
        }

        function closePopup() {
          const popup = document.querySelector(".Car-popup-overlay");
          popup.classList.remove("active");
          popup.style.display = "none";
          document.body.style.overflow = "";
        }

        // Show no Cars message
        function showNoCarsMessage() {
          const CarGrid = document.querySelector(".car-grid");
          CarGrid.innerHTML = `
      <div class="no-Cars-message" style="grid-column: 1 / -1; text-align: center; padding: 60px 20px;">
        <i class="fas fa-motorcycle" style="font-size: 4rem; color: #ccc; margin-bottom: 20px;"></i>
        <h3 style="color: #666; margin-bottom: 10px;">No Cars Available</h3>
        <p style="color: #999;">New Cars coming soon! Check back later.</p>
      </div>
    `;
        }

        // Show error message
        function showErrorMessage() {
          const CarGrid = document.querySelector(".car-grid");
          CarGrid.innerHTML = `
      <div class="error-message" style="grid-column: 1 / -1; text-align: center; padding: 60px 20px;">
        <i class="fas fa-exclamation-triangle" style="font-size: 4rem; color: #ff6b00; margin-bottom: 20px;"></i>
        <h3 style="color: #666; margin-bottom: 10px;">Failed to Load Cars</h3>
        <p style="color: #999; margin-bottom: 20px;">Please check your connection and try again.</p>
        <button onclick="location.reload()" style="background: #ff6b00; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
          Retry
        </button>
      </div>
    `;
        }

        // Update Car count
        function updateCarCount(count) {
          document.getElementById("filtered-count").textContent = `${count} ${
            count === 1 ? "Car" : "Cars"
          } Available`;
        }

        // Filter functionality
        function initFilters() {
          const filterButtons = document.querySelectorAll(".filter-btn");
          const filterDropdowns = document.querySelectorAll(".filter-dropdown");

          // Toggle filter dropdowns
          filterButtons.forEach((button) => {
            button.addEventListener("click", function (e) {
              e.stopPropagation();
              const filterType = this.dataset.filter;
              const dropdown = document.getElementById(
                `${filterType}-dropdown`
              );

              // Close all dropdowns first
              filterDropdowns.forEach((d) => {
                d.style.display = "none";
              });
              filterButtons.forEach((btn) => {
                btn.classList.remove("active");
              });

              // If "All Cars" was clicked
              if (filterType === "all") {
                resetFilters();
                displayCars(allCars);
                updateCarCount(allCars.length);
                return;
              }

              // Toggle the clicked dropdown
              if (dropdown.style.display === "block") {
                dropdown.style.display = "none";
                this.classList.remove("active");
              } else {
                dropdown.style.display = "block";
                this.classList.add("active");
              }
            });
          });

          // Close dropdowns when clicking outside
          document.addEventListener("click", function (e) {
            if (
              !e.target.closest(".filter-btn") &&
              !e.target.closest(".filter-dropdown")
            ) {
              filterDropdowns.forEach((dropdown) => {
                dropdown.style.display = "none";
              });
              filterButtons.forEach((btn) => {
                btn.classList.remove("active");
              });
            }
          });

          // Initialize specific filters
          initPriceFilter();
          initBrandFilter();
          initYearFilter();
          initKmFilter();
          initOwnerFilter();
          initFuelFilter();
          initBrandLogos();
        }

        function initBrandLogos() {
          // Make brand logos keyboard accessible and update behavior
          document.querySelectorAll(".brand-logo").forEach((logo) => {
            // ensure focusable and identified as button
            logo.setAttribute("tabindex", "0");
            logo.setAttribute("role", "button");
            logo.setAttribute("aria-pressed", "false");

            const activate = () => {
              const brand = logo.dataset.brand;

              if (currentFilters.make === brand) {
                currentFilters.make = null;
                document.querySelectorAll(".brand-logo").forEach((l) => {
                  l.classList.remove("active", "brand-selected");
                  l.setAttribute("aria-pressed", "false");
                });
              } else {
                currentFilters.make = brand;
                document.querySelectorAll(".brand-logo").forEach((l) => {
                  l.classList.remove("active", "brand-selected");
                  l.setAttribute("aria-pressed", "false");
                });
                logo.classList.add("active", "brand-selected");
                logo.setAttribute("aria-pressed", "true");
              }

              // Update UI and apply filters
              const brandBtn = document.querySelector('[data-filter="brand"]');
              if (brandBtn) {
                brandBtn.innerHTML = currentFilters.make
                  ? `${currentFilters.make} <i class="fas fa-chevron-down"></i>`
                  : `Brand <i class="fas fa-chevron-down"></i>`;
              }

              // Update URL param without reloading
              try {
                const params = new URLSearchParams(window.location.search);
                if (currentFilters.make)
                  params.set("brand", currentFilters.make);
                else params.delete("brand");
                const newUrl =
                  window.location.pathname +
                  (params.toString() ? "?" + params.toString() : "");
                window.history.replaceState({}, "", newUrl);
              } catch (e) {
                // ignore
              }

              if (typeof applyAllFilters === "function") applyAllFilters();
            };

            logo.addEventListener("click", activate);
            logo.addEventListener("keydown", (e) => {
              if (e.key === "Enter" || e.key === " ") {
                e.preventDefault();
                activate();
              }
            });
          });

          // If a brand query param exists on load, apply it
          (function applyBrandFromQuery() {
            const urlParams = new URLSearchParams(window.location.search);
            const brandParam = urlParams.get("brand");
            if (!brandParam) return;
            const decoded = decodeURIComponent(brandParam.replace(/\+/g, " "));
            const match = Array.from(
              document.querySelectorAll(".brand-logo")
            ).find(
              (b) =>
                b.dataset.brand &&
                b.dataset.brand.toLowerCase() === decoded.toLowerCase()
            );
            if (match) {
              // trigger the same activation flow
              match.click();
            }
          })();
        }

        // Price filter
        function initPriceFilter() {
          const minPriceInput = document.getElementById("min-price");
          const maxPriceInput = document.getElementById("max-price");

          if (minPriceInput && maxPriceInput) {
            minPriceInput.addEventListener("input", applyPriceFilter);
            maxPriceInput.addEventListener("input", applyPriceFilter);

            document.querySelectorAll(".price-preset").forEach((preset) => {
              preset.addEventListener("click", function () {
                minPriceInput.value = this.dataset.min;
                maxPriceInput.value = this.dataset.max || "";
                applyPriceFilter();
              });
            });
          }
        }

        // Initialize search functionality
        function initSearch() {
          const searchInput = document.getElementById("inventory-search");
          const searchBtn = document.getElementById("search-btn");

          // Handle search button click
          searchBtn.addEventListener("click", () => {
            const searchTerm = searchInput.value.trim();
            if (searchTerm) {
              // Update URL with search parameter
              window.history.pushState(
                {},
                "",
                `https://www.alfamotorworld.com/inventory.html?search=${encodeURIComponent(
                  searchTerm
                )}`
              );
              applyAllFilters();
            }
          });

          searchInput.addEventListener("keypress", (e) => {
            if (e.key === "Enter") {
              const searchTerm = searchInput.value.trim();
              if (searchTerm) {
                window.history.pushState(
                  {},
                  "",
                  `https://www.alfamotorworld.com/inventory.html?search=${encodeURIComponent(
                    searchTerm
                  )}`
                );
                applyAllFilters();
              }
            }
          });

          // Check for search term in URL on page load
          const urlParams = new URLSearchParams(window.location.search);
          const searchTerm = urlParams.get("search");
          if (searchTerm) {
            searchInput.value = searchTerm;
            applyAllFilters();
          }
        }
        // Mobile filter functionality
        function initMobileFilters() {
          const mobileFilterBtn = document.createElement("button");
          mobileFilterBtn.className = "mobile-filter-btn";
          mobileFilterBtn.innerHTML = '<i class="fas fa-filter"></i> Filters';

          // Add the button to the search container
          const searchContainer = document.querySelector(".search-container");
          if (searchContainer) {
            searchContainer.appendChild(mobileFilterBtn);
          }

          // Mobile filter toggle
          const mobileFiltersContainer = document.querySelector(
            ".mobile-filters-container"
          );
          const closeFiltersBtn = document.querySelector(".close-filters-btn");

          if (mobileFilterBtn && mobileFiltersContainer && closeFiltersBtn) {
            mobileFilterBtn.addEventListener("click", function () {
              mobileFiltersContainer.style.display = "block";
              document.body.style.overflow = "hidden";
            });

            closeFiltersBtn.addEventListener("click", function () {
              mobileFiltersContainer.style.display = "none";
              document.body.style.overflow = "";
            });

            mobileFiltersContainer.addEventListener("click", function (e) {
              if (e.target === mobileFiltersContainer) {
                mobileFiltersContainer.style.display = "none";
                document.body.style.overflow = "";
              }
            });
          }

          // Initialize mobile filter controls
          initMobilePriceFilter();
          initMobileBrandFilter();
          initMobileYearFilter();
          initMobileKmFilter();
          initMobileOwnerFilter();
          initMobileFuelFilter();
        }

        // Mobile price filter
        function initMobilePriceFilter() {
          const minPriceInput = document.getElementById("min-price-mobile");
          const maxPriceInput = document.getElementById("max-price-mobile");

          if (minPriceInput && maxPriceInput) {
            minPriceInput.addEventListener("input", applyPriceFilterMobile);
            maxPriceInput.addEventListener("input", applyPriceFilterMobile);

            document
              .querySelectorAll("#price-dropdown-mobile .price-preset")
              .forEach((preset) => {
                preset.addEventListener("click", function () {
                  minPriceInput.value = this.dataset.min;
                  maxPriceInput.value = this.dataset.max || "";
                  applyPriceFilterMobile();
                });
              });
          }
        }

        function applyPriceFilterMobile() {
          const minPrice =
            parseInt(document.getElementById("min-price-mobile").value) || 0;
          const maxPrice =
            parseInt(document.getElementById("max-price-mobile").value) ||
            Infinity;

          currentFilters.minPrice = minPrice;
          currentFilters.maxPrice = maxPrice;

          applyAllFilters();
          document.querySelector(".mobile-filters-container").style.display =
            "none";
          document.body.style.overflow = "";
        }

        // Mobile brand filter
        function initMobileBrandFilter() {
          document
            .querySelectorAll("#brand-dropdown-mobile .filter-option")
            .forEach((option) => {
              option.addEventListener("click", function () {
                const brand = this.dataset.brand;
                currentFilters.make =
                  brand === currentFilters.make ? null : brand;
                applyAllFilters();

                // Update button text
                const brandBtn = document.querySelector(
                  '[data-filter="brand"]'
                );
                brandBtn.innerHTML = currentFilters.make
                  ? `${brand} <i class="fas fa-chevron-down"></i>`
                  : `Brand <i class="fas fa-chevron-down"></i>`;

                document.querySelector(
                  ".mobile-filters-container"
                ).style.display = "none";
                document.body.style.overflow = "";
              });
            });
        }

        // Mobile year filter
        function initMobileYearFilter() {
          const yearMin = document.getElementById("year-min-mobile");
          const yearMax = document.getElementById("year-max-mobile");
          const yearMinValue = document.getElementById("year-min-value-mobile");
          const yearMaxValue = document.getElementById("year-max-value-mobile");

          if (yearMin && yearMax) {
            yearMin.addEventListener("input", function () {
              yearMinValue.textContent = this.value;
              currentFilters.minYear = parseInt(this.value);
              applyAllFilters();
            });

            yearMax.addEventListener("input", function () {
              yearMaxValue.textContent = this.value;
              currentFilters.maxYear = parseInt(this.value);
              applyAllFilters();
            });
          }
        }

        // Mobile km filter
        function initMobileKmFilter() {
          const kmMin = document.getElementById("km-min-mobile");
          const kmMax = document.getElementById("km-max-mobile");
          const kmMinValue = document.getElementById("km-min-value-mobile");
          const kmMaxValue = document.getElementById("km-max-value-mobile");

          if (kmMin && kmMax) {
            kmMin.addEventListener("input", function () {
              kmMinValue.textContent = parseInt(this.value).toLocaleString();
              currentFilters.minKm = parseInt(this.value);
              applyAllFilters();
            });

            kmMax.addEventListener("input", function () {
              kmMaxValue.textContent = parseInt(this.value).toLocaleString();
              currentFilters.maxKm = parseInt(this.value);
              applyAllFilters();
            });
          }
        }

        // Mobile owner filter
        function initMobileOwnerFilter() {
          document
            .querySelectorAll("#owner-dropdown-mobile .filter-option")
            .forEach((option) => {
              option.addEventListener("click", function () {
                const owner = this.dataset.owner;
                currentFilters.owner =
                  owner === currentFilters.owner ? null : owner;
                applyAllFilters();

                // Update button text if needed
                const ownerBtn = document.querySelector(
                  '[data-filter="owner"]'
                );
                if (ownerBtn) {
                  ownerBtn.innerHTML = currentFilters.owner
                    ? `${formatOwnership(
                        owner
                      )} <i class="fas fa-chevron-down"></i>`
                    : `Ownership <i class="fas fa-chevron-down"></i>`;
                }

                document.querySelector(
                  ".mobile-filters-container"
                ).style.display = "none";
                document.body.style.overflow = "";
              });
            });
        }

        // Mobile fuel filter
        function initMobileFuelFilter() {
          document
            .querySelectorAll("#fuel-dropdown-mobile .filter-option")
            .forEach((option) => {
              option.addEventListener("click", function () {
                const fuel = this.dataset.fuel;
                currentFilters.fuel =
                  fuel === currentFilters.fuel ? null : fuel;
                applyAllFilters();

                // Update button text if needed
                const fuelBtn = document.querySelector('[data-filter="fuel"]');
                if (fuelBtn) {
                  fuelBtn.innerHTML = currentFilters.fuel
                    ? `${fuel} <i class="fas fa-chevron-down"></i>`
                    : `Fuel Type <i class="fas fa-chevron-down"></i>`;
                }

                document.querySelector(
                  ".mobile-filters-container"
                ).style.display = "none";
                document.body.style.overflow = "";
              });
            });
        }

        function applyPriceFilter() {
          const minPrice =
            parseInt(document.getElementById("min-price").value) || 0;
          const maxPrice =
            parseInt(document.getElementById("max-price").value) || Infinity;

          currentFilters.minPrice = minPrice;
          currentFilters.maxPrice = maxPrice;

          applyAllFilters();
        }

        // Brand filter
        function initBrandFilter() {
          document
            .querySelectorAll(".brand-options .filter-option")
            .forEach((option) => {
              option.addEventListener("click", function () {
                const brand = this.dataset.brand;
                currentFilters.make =
                  brand === currentFilters.make ? null : brand;
                applyAllFilters();

                // Update button text
                const brandBtn = document.querySelector(
                  '[data-filter="brand"]'
                );
                brandBtn.innerHTML = currentFilters.make
                  ? `${brand} <i class="fas fa-chevron-down"></i>`
                  : `Brand <i class="fas fa-chevron-down"></i>`;

                // Update brand logos
                document.querySelectorAll(".brand-logo").forEach((logo) => {
                  logo.classList.remove("active");
                  if (
                    currentFilters.make &&
                    logo.dataset.brand === currentFilters.make
                  ) {
                    logo.classList.add("active");
                  }
                });
              });
            });
        }

        // Year filter
        function initYearFilter() {
          const yearMin = document.getElementById("year-min");
          const yearMax = document.getElementById("year-max");
          const yearMinValue = document.getElementById("year-min-value");
          const yearMaxValue = document.getElementById("year-max-value");

          if (yearMin && yearMax) {
            yearMin.addEventListener("input", function () {
              yearMinValue.textContent = this.value;
              currentFilters.minYear = parseInt(this.value);
              applyAllFilters();
            });

            yearMax.addEventListener("input", function () {
              yearMaxValue.textContent = this.value;
              currentFilters.maxYear = parseInt(this.value);
              applyAllFilters();
            });
          }
        }

        // KM filter
        function initKmFilter() {
          const kmMin = document.getElementById("km-min");
          const kmMax = document.getElementById("km-max");
          const kmMinValue = document.getElementById("km-min-value");
          const kmMaxValue = document.getElementById("km-max-value");

          if (kmMin && kmMax) {
            kmMin.addEventListener("input", function () {
              kmMinValue.textContent = parseInt(this.value).toLocaleString();
              currentFilters.minKm = parseInt(this.value);
              applyAllFilters();
            });

            kmMax.addEventListener("input", function () {
              kmMaxValue.textContent = parseInt(this.value).toLocaleString();
              currentFilters.maxKm = parseInt(this.value);
              applyAllFilters();
            });
          }
        }

        // Owner filter
        function initOwnerFilter() {
          document
            .querySelectorAll(".ownership-options .filter-option")
            .forEach((option) => {
              option.addEventListener("click", function () {
                const owner = this.dataset.owner;
                currentFilters.owner =
                  owner === currentFilters.owner ? null : owner;
                applyAllFilters();

                // Update button text if needed
                const ownerBtn = document.querySelector(
                  '[data-filter="owner"]'
                );
                if (ownerBtn) {
                  ownerBtn.innerHTML = currentFilters.owner
                    ? `${formatOwnership(
                        owner
                      )} <i class="fas fa-chevron-down"></i>`
                    : `Ownership <i class="fas fa-chevron-down"></i>`;
                }
              });
            });
        }

        // Fuel filter
        function initFuelFilter() {
          document
            .querySelectorAll(".fuel-options .filter-option")
            .forEach((option) => {
              option.addEventListener("click", function () {
                const fuel = this.dataset.fuel;
                currentFilters.fuel =
                  fuel === currentFilters.fuel ? null : fuel;
                applyAllFilters();

                // Update button text if needed
                const fuelBtn = document.querySelector('[data-filter="fuel"]');
                if (fuelBtn) {
                  fuelBtn.innerHTML = currentFilters.fuel
                    ? `${fuel} <i class="fas fa-chevron-down"></i>`
                    : `Fuel Type <i class="fas fa-chevron-down"></i>`;
                }
              });
            });
        }

        function getSearchParam() {
          const urlParams = new URLSearchParams(window.location.search);
          return urlParams.get("search")?.toLowerCase() || "";
        }

        function applyAllFilters() {
          console.log("Current filters:", currentFilters);
          console.log("All cars:", allCars);

          const filteredCars = allCars.filter((car) => {
            console.log("Checking car:", car);

            const price = car.sellingPrice || 0;
            const year = car.modelYear || new Date().getFullYear();
            const km = car.kmDriven || 0;
            const brand = (car.make || "").toLowerCase();
            const owner = car.ownership || "";
            const fuel = car.fuelType || "";

            console.log(`Car ${car.make} ${car.model}:`);
            console.log(
              `Year: ${year} (filter: ${currentFilters.minYear}-${currentFilters.maxYear})`
            );
            console.log(
              `Price: ${price} (filter: ${currentFilters.minPrice}-${currentFilters.maxPrice})`
            );
            console.log(
              `KM: ${km} (filter: ${currentFilters.minKm}-${currentFilters.maxKm})`
            );

            const priceMatch =
              price >= currentFilters.minPrice &&
              price <= currentFilters.maxPrice;
            const yearMatch =
              year >= currentFilters.minYear && year <= currentFilters.maxYear;
            const kmMatch =
              km >= currentFilters.minKm && km <= currentFilters.maxKm;
            const brandMatch =
              !currentFilters.make ||
              car.make
                .toLowerCase()
                .includes(currentFilters.make.toLowerCase());
            console.log(`Brand match for ${car.make}: ${brandMatch}`);

            const ownerMatch =
              !currentFilters.owner || owner.includes(currentFilters.owner);
            const fuelMatch =
              !currentFilters.fuel || fuel === currentFilters.fuel;

            const isMatch =
              priceMatch &&
              yearMatch &&
              kmMatch &&
              brandMatch &&
              ownerMatch &&
              fuelMatch;
            console.log(`Car matches filters: ${isMatch}`);

            return isMatch;
          });

          console.log("Filtered cars:", filteredCars);
          displayCars(filteredCars);
        }

        function sortCars(Cars, sortType) {
          switch (sortType) {
            case "price-low":
              return [...Cars].sort((a, b) => (a.price || 0) - (b.price || 0));
            case "price-high":
              return [...Cars].sort((a, b) => (b.price || 0) - (a.price || 0));
            case "year-new":
              return [...Cars].sort(
                (a, b) => (b.modelYear || 0) - (a.modelYear || 0)
              );
            case "year-old":
              return [...Cars].sort(
                (a, b) => (a.modelYear || 0) - (b.modelYear || 0)
              );
            default:
              return Cars; // Default sorting (original order)
          }
        }

        function showSearchTerm(term) {
          const existingDisplay = document.querySelector(
            ".search-term-display"
          );
          if (existingDisplay) {
            existingDisplay.remove();
          }

          const searchContainer = document.createElement("div");
          searchContainer.className = "search-term-display";

          const searchText = document.createElement("span");
          searchText.textContent = `Showing results for: ${term}`;
          searchText.className = "search-term-text";

          const clearBtn = document.createElement("button");
          clearBtn.className = "clear-search-btn";
          clearBtn.innerHTML = "&times;";
          clearBtn.title = "Clear search";
          clearBtn.addEventListener("click", () => {
            window.location.href =
              "https://www.alfamotorworld.com/inventory.html";
          });

          searchContainer.appendChild(searchText);
          searchContainer.appendChild(clearBtn);

          const sectionHeader = document.querySelector(".section-header");
          if (sectionHeader) {
            sectionHeader.insertBefore(
              searchContainer,
              sectionHeader.firstChild
            );
          }
        }

        function resetFilters() {
          currentFilters = {
            brand: null,
            minPrice: 0,
            maxPrice: Infinity,
            minYear: 2015,
            maxYear: 2024,
            minKm: 0,
            maxKm: 50000,
            owner: null,
            fuel: null,
          };

          // Reset form inputs
          document.getElementById("min-price").value = "";
          document.getElementById("max-price").value = "";
          document.getElementById("year-min").value = "2015";
          document.getElementById("year-max").value = "2024";
          document.getElementById("km-min").value = "0";
          document.getElementById("km-max").value = "50000";

          // Reset display values
          document.getElementById("year-min-value").textContent = "2015";
          document.getElementById("year-max-value").textContent = "2024";
          document.getElementById("km-min-value").textContent = "0";
          document.getElementById("km-max-value").textContent = "50,000";

          // Reset all filter button texts
          const brandBtn = document.querySelector('[data-filter="brand"]');
          brandBtn.innerHTML = `Brand <i class="fas fa-chevron-down"></i>`;

          const ownerBtn = document.querySelector('[data-filter="owner"]');
          if (ownerBtn) {
            ownerBtn.innerHTML = `Ownership <i class="fas fa-chevron-down"></i>`;
          }

          const fuelBtn = document.querySelector('[data-filter="fuel"]');
          if (fuelBtn) {
            fuelBtn.innerHTML = `Fuel Type <i class="fas fa-chevron-down"></i>`;
          }

          // Reset brand logos
          document.querySelectorAll(".brand-logo").forEach((logo) => {
            logo.classList.remove("active");
          });
        }

        // Format age for display
        function formatAge(days) {
          if (days >= 365) {
            const years = Math.floor(days / 365);
            return `${years} year${years > 1 ? "s" : ""}`;
          } else if (days >= 30) {
            const months = Math.floor(days / 30);
            return `${months} month${months > 1 ? "s" : ""}`;
          } else {
            return `${days} day${days !== 1 ? "s" : ""}`;
          }
        }

        // Initialize everything
        loadCars();
        initFilters();
        initSortDropdown(); // Now this will work properly
        initSearch(); // Initialize search functionality
        initMobileFilters(); // Add this line
      });
    </script>
    <script>
      // Lazy-load images and avoid CLS for dynamically injected car cards
      (function () {
        function safeDecode(img) {
          if (!img) return;
          if (img.loading !== "lazy") img.loading = "lazy";
          if ("decode" in img) {
            img.decode().catch(function () {});
          }
        }

        document.addEventListener("DOMContentLoaded", function () {
          // Decode hero/logo images eagerly to improve LCP but without blocking
          const heroImgs = document.querySelectorAll(
            ".inventory-hero img, .logo img"
          );
          heroImgs.forEach(function (img) {
            if (!img.complete) {
              img.addEventListener("load", function () {});
            }
            safeDecode(img);
          });

          // Set lazy loading for existing images in the car grid and brand logos
          document
            .querySelectorAll(".car-grid img, .brand-logos-container img")
            .forEach(function (img) {
              if (!img.hasAttribute("loading"))
                img.setAttribute("loading", "lazy");
              safeDecode(img);
            });

          // Observe dynamically added car cards (from AJAX) and set attributes to avoid CLS
          const carGrid = document.querySelector(".car-grid");
          if (carGrid && window.MutationObserver) {
            const mo = new MutationObserver(function (mutations) {
              mutations.forEach(function (m) {
                m.addedNodes.forEach(function (node) {
                  if (node.nodeType !== 1) return;
                  if (node.matches && node.matches(".car-card")) {
                    node.querySelectorAll("img").forEach(function (img) {
                      if (!img.hasAttribute("loading"))
                        img.setAttribute("loading", "lazy");
                      safeDecode(img);
                    });
                  }
                });
              });
            });
            mo.observe(carGrid, { childList: true, subtree: true });
          }
        });
      })();
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const toggleBtn = document.createElement("button");
        toggleBtn.className = "mobile-menu-toggle";
        toggleBtn.setAttribute("aria-label", "Open menu");
        toggleBtn.setAttribute("aria-expanded", "false");
        toggleBtn.setAttribute("aria-controls", "mobileMenu");
        toggleBtn.innerHTML = '<i class="fas fa-bars"></i>';

        const navbar = document.querySelector(".navbar");
        navbar.appendChild(toggleBtn);

        const mobileMenu = document.createElement("div");
        mobileMenu.id = "mobileMenu";
        mobileMenu.className = "mobile-menu";
        mobileMenu.innerHTML = `
    <button class="close-btn" aria-label="Close mobile menu">
      <i class="fas fa-times" aria-hidden="true"></i>
    </button>
    <ul class="nav-links">
      <li>
        <a href="https://www.alfamotorworld.com/"  aria-current="page">
          <span data-translate="Home">Home</span>
        </a>
      </li>
      <li>
        <a href="https://www.alfamotorworld.com/inventory.html">
          <span data-translate="Vehicles for Sale">Vehicles for Sale</span>
        </a>
      </li>
      <li>
        <a href="https://www.alfamotorworld.com/sell.html">
          <span data-translate="Sell Your Vehicle">Sell Your Vehicle</span>
        </a>
      </li>
       <li>
        <a href="https://www.alfamotorworld.com/happy-customers.html">
          <span data-translate="Happy Customers">Happy Customers</span>
        </a>
      </li>
       <li>
  <a href="https://www.alfamotorworld.com/finance.html">
          <span data-translate="Financing">Financing</span>
        </a>
      </li>
      <li>
        <a href="https://www.alfamotorworld.com/about.html">
          <span data-translate="About Us">About Us</span>
        </a>
      </li>
      <li>
        <a href="https://www.alfamotorworld.com/contact.html">
          <span data-translate="Contact">Contact</span>
        </a>
      </li>
    </ul>
    <div class="login-btn">
      <a href="https://www.alfamotorworld.com/getquote.html">
        <button aria-label="Get a quote for your Car" data-translate="Get the Quote">
          Get the Quote
        </button>
      </a>
    </div>
  `;

        document.body.appendChild(mobileMenu);

        toggleBtn.addEventListener("click", function () {
          mobileMenu.classList.add("active");
          toggleBtn.setAttribute("aria-expanded", "true");
          mobileMenu.setAttribute("aria-hidden", "false");
        });

        mobileMenu
          .querySelector(".close-btn")
          .addEventListener("click", function () {
            mobileMenu.classList.remove("active");
          });
      });
      // Add this function near the top of your script section
      function formatAge(days) {
        if (days >= 365) {
          const years = Math.floor(days / 365);
          return `${years} year${years > 1 ? "s" : ""}`;
        } else if (days >= 30) {
          const months = Math.floor(days / 30);
          return `${months} month${months > 1 ? "s" : ""}`;
        } else {
          return `${days} day${days !== 1 ? "s" : ""}`;
        }
      }
    </script>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-N2NFEWQNVB"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-N2NFEWQNVB");
    </script>
    <!-- Review modal script -->
    <script src="/review.js"></script>
    <script src="/i18n.js"></script>
    <script src="/inventory.js"></script>
    <div
      class="Car-popup-overlay"
      style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(30, 41, 59, 0.85);
        z-index: 9999;
        display: none;
        align-items: center;
        justify-content: center;
      "
    >
      <div
        class="Car-popup"
        style="
          background: #fff;
          border-radius: 16px;
          max-width: 600px;
          width: 95vw;
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.18);
          position: relative;
          padding: 32px 24px;
        "
      >
        <button
          class="close-popup"
          style="
            position: absolute;
            top: 18px;
            right: 18px;
            background: #f87171;
            color: #fff;
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            font-size: 1.5rem;
            cursor: pointer;
          "
        >
          &times;
        </button>
        <div
          class="popup-content"
          style="display: flex; flex-direction: column; align-items: center"
        >
          <div
            class="popup-image-container"
            style="width: 100%; margin-bottom: 18px"
          >
            <div
              id="popup-carousel"
              style="
                position: relative;
                width: 100%;
                max-width: 400px;
                margin: 0 auto;
              "
            >
              <img
                id="popup-Car-image"
                src=""
                alt="Car Image"
                style="
                  width: 100%;
                  max-height: 260px;
                  object-fit: cover;
                  border-radius: 12px;
                  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
                "
              />
              <button
                id="carousel-prev"
                style="
                  position: absolute;
                  top: 50%;
                  left: 8px;
                  transform: translateY(-50%);
                  background: #334155;
                  color: #fff;
                  border: none;
                  border-radius: 50%;
                  width: 32px;
                  height: 32px;
                  font-size: 1.2rem;
                  cursor: pointer;
                "
              >
                &#8592;
              </button>
              <button
                id="carousel-next"
                style="
                  position: absolute;
                  top: 50%;
                  right: 8px;
                  transform: translateY(-50%);
                  background: #334155;
                  color: #fff;
                  border: none;
                  border-radius: 50%;
                  width: 32px;
                  height: 32px;
                  font-size: 1.2rem;
                  cursor: pointer;
                "
              >
                &#8594;
              </button>
            </div>
            <div
              id="popup-Car-thumbnails"
              style="
                display: flex;
                justify-content: center;
                gap: 8px;
                margin-top: 10px;
              "
            ></div>
          </div>
          <div class="popup-details" style="width: 100%">
            <h2
              id="popup-Car-title"
              style="
                font-size: 2rem;
                font-weight: 700;
                color: #1e293b;
                margin-bottom: 8px;
              "
            ></h2>
            <span
              class="model"
              id="popup-Car-model"
              style="
                font-size: 1.1rem;
                color: #64748b;
                margin-bottom: 12px;
                display: block;
              "
            ></span>
            <div
              class="details"
              style="
                display: flex;
                flex-wrap: wrap;
                gap: 16px;
                margin-bottom: 18px;
              "
            >
              <div
                class="detail-item"
                style="
                  display: flex;
                  align-items: center;
                  gap: 6px;
                  color: #334155;
                "
              >
                <i class="fas fa-tachometer-alt"></i
                ><span id="popup-Car-km"></span>
              </div>
              <div
                class="detail-item"
                style="
                  display: flex;
                  align-items: center;
                  gap: 6px;
                  color: #334155;
                "
              >
                <i class="fas fa-user"></i><span id="popup-Car-owner"></span>
              </div>
              <div
                class="detail-item"
                style="
                  display: flex;
                  align-items: center;
                  gap: 6px;
                  color: #334155;
                "
              >
                <i class="fas fa-gas-pump"></i><span id="popup-Car-fuel"></span>
              </div>
              <div
                class="detail-item"
                style="
                  display: flex;
                  align-items: center;
                  gap: 6px;
                  color: #334155;
                "
              >
                <i class="fas fa-calendar-alt"></i
                ><span id="popup-Car-age"></span>
              </div>
            </div>
            <div class="price-container" style="margin-bottom: 18px">
              <div
                class="price"
                id="popup-Car-price"
                style="font-size: 1.5rem; font-weight: 600; color: #10b981"
              ></div>
              <div
                class="emi"
                id="popup-Car-emi"
                style="font-size: 1rem; color: #64748b"
              ></div>
            </div>
            <button
              class="contact-btn"
              style="
                background: #3b82f6;
                color: #fff;
                border: none;
                border-radius: 8px;
                padding: 12px 24px;
                font-size: 1rem;
                font-weight: 500;
                cursor: pointer;
                margin-top: 10px;
              "
            >
              Contact Seller
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="floating-buttons">
      <a
        href="https://wa.me/919036818492"
        class="floating-btn whatsapp-btn"
        data-tooltip="Chat on WhatsApp"
        aria-label="Chat on WhatsApp"
      >
        <i class="fa-brands fa-whatsapp fa-bounce"></i>
      </a>
      <a
        href="https://youtube.com/@Carbuilders-vo2nm?feature=shared"
        class="floating-btn youtube-btn"
        data-tooltip="Watch on YouTube"
        aria-label="Watch on YouTube"
      >
        <i class="fa-brands fa-youtube fa-beat-fade" style="color: #ff0000"></i>
      </a>
      <a
        href="tel:+919036818492"
        class="floating-btn call-btn"
        data-tooltip="Call Us"
        aria-label="Call Us"
      >
        <i class="fa-solid fa-phone-volume fa-shake"></i>
      </a>
    </div>
    <div class="mobile-filters-container">
      <div class="mobile-filters-inner">
        <button class="close-filters-btn">&times;</button>
        <div class="filters-container">
          <h3 data-translate="Filters">Filters</h3>
          <div class="filter-group">
            <button class="filter-btn" data-filter="all">All Cars</button>
          </div>

          <div class="filter-group">
            <button class="filter-btn" data-filter="price">
              Price <i class="fas fa-chevron-down"></i>
            </button>
            <div class="filter-dropdown" id="price-dropdown-mobile">
              <div class="price-range">
                <div class="range-inputs">
                  <input
                    type="number"
                    id="min-price-mobile"
                    placeholder="Min"
                    min="0"
                  />
                  <span>to</span>
                  <input
                    type="number"
                    id="max-price-mobile"
                    placeholder="Max"
                    min="0"
                  />
                </div>
                <div class="price-presets">
                  <button class="price-preset" data-min="0" data-max="50000">
                    Under 50K
                  </button>
                  <button
                    class="price-preset"
                    data-min="50000"
                    data-max="100000"
                  >
                    50K-1L
                  </button>
                  <button
                    class="price-preset"
                    data-min="100000"
                    data-max="200000"
                  >
                    1L-2L
                  </button>
                  <button
                    class="price-preset"
                    data-min="200000"
                    data-max="500000"
                  >
                    2L-5L
                  </button>
                  <button class="price-preset" data-min="500000">5L+</button>
                </div>
              </div>
            </div>
          </div>
          <div class="filter-group">
            <button class="filter-btn" data-filter="brand">
              Brand <i class="fas fa-chevron-down"></i>
            </button>
            <div class="filter-dropdown" id="brand-dropdown-mobile">
              <div class="filter-options brand-options">
                <button class="filter-option" data-brand="Audi">Audi</button>
                <button class="filter-option" data-brand="Bentley">
                  Bentley
                </button>
                <button class="filter-option" data-brand="BMW">BMW</button>
                <button class="filter-option" data-brand="Chevrolet">
                  Chevrolet
                </button>
                <button class="filter-option" data-brand="Chrysler">
                  Chrysler
                </button>
                <button class="filter-option" data-brand="Ferrari">
                  Ferrari
                </button>
                <button class="filter-option" data-brand="FIAT">FIAT</button>
                <button class="filter-option" data-brand="Ford">Ford</button>
                <button class="filter-option" data-brand="Honda">Honda</button>
                <button class="filter-option" data-brand="Hyundai">
                  Hyundai
                </button>
                <button class="filter-option" data-brand="Isuzu">Isuzu</button>
                <button class="filter-option" data-brand="Jaguar">
                  Jaguar
                </button>
                <button class="filter-option" data-brand="Jeep">Jeep</button>
                <button class="filter-option" data-brand="Kia">Kia</button>
                <button class="filter-option" data-brand="Lamborghini">
                  Lamborghini
                </button>
                <button class="filter-option" data-brand="Land Rover">
                  Land Rover
                </button>
                <button class="filter-option" data-brand="Lexus">Lexus</button>
                <button class="filter-option" data-brand="Lotus">Lotus</button>
                <button class="filter-option" data-brand="Maybach">
                  Maybach
                </button>
                <button class="filter-option" data-brand="Mazda">Mazda</button>
                <button class="filter-option" data-brand="McLaren">
                  McLaren
                </button>
                <button class="filter-option" data-brand="Mercedes Benz">
                  Mercedes Benz
                </button>
                <button class="filter-option" data-brand="MINI">MINI</button>
                <button class="filter-option" data-brand="Mitsubishi">
                  Mitsubishi
                </button>
                <button class="filter-option" data-brand="Nissan">
                  Nissan
                </button>
                <button class="filter-option" data-brand="Porsche">
                  Porsche
                </button>
                <button class="filter-option" data-brand="Rolls-Royce">
                  Rolls-Royce
                </button>
                <button class="filter-option" data-brand="SRT">SRT</button>
                <button class="filter-option" data-brand="Suzuki">
                  Suzuki
                </button>
                <button class="filter-option" data-brand="Toyota">
                  Toyota
                </button>
                <button class="filter-option" data-brand="Volkswagen">
                  Volkswagen
                </button>
                <button class="filter-option" data-brand="Volvo">Volvo</button>
              </div>
            </div>
          </div>

          <!-- Year filter -->
          <div class="filter-group">
            <button class="filter-btn" data-filter="year">
              Year <i class="fas fa-chevron-down"></i>
            </button>
            <div class="filter-dropdown" id="year-dropdown-mobile">
              <div class="year-slider">
                <div class="slider-container">
                  <input
                    type="range"
                    id="year-min-mobile"
                    min="2015"
                    max="2024"
                    value="2015"
                    step="1"
                  />
                  <input
                    type="range"
                    id="year-max-mobile"
                    min="2015"
                    max="2024"
                    value="2024"
                    step="1"
                  />
                </div>
                <div class="year-values">
                  <span id="year-min-value-mobile">2015</span>
                  <span>to</span>
                  <span id="year-max-value-mobile">2024</span>
                </div>
              </div>
            </div>
          </div>

          <!-- KM Driven filter -->
          <div class="filter-group">
            <button class="filter-btn" data-filter="km">
              KM Driven <i class="fas fa-chevron-down"></i>
            </button>
            <div class="filter-dropdown" id="km-dropdown-mobile">
              <div class="km-slider">
                <div class="slider-container">
                  <input
                    type="range"
                    id="km-min-mobile"
                    min="0"
                    max="50000"
                    value="0"
                    step="500"
                  />
                  <input
                    type="range"
                    id="km-max-mobile"
                    min="0"
                    max="50000"
                    value="50000"
                    step="500"
                  />
                </div>
                <div class="km-values">
                  <span id="km-min-value-mobile">0</span>
                  <span>to</span>
                  <span id="km-max-value-mobile">50,000</span>
                  <span>km</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Ownership filter -->
          <div class="filter-group">
            <button class="filter-btn" data-filter="owner">
              Ownership <i class="fas fa-chevron-down"></i>
            </button>
            <div class="filter-dropdown" id="owner-dropdown-mobile">
              <div class="filter-options ownership-options">
                <button class="filter-option" data-owner="1">1st Owner</button>
                <button class="filter-option" data-owner="2">2nd Owner</button>
                <button class="filter-option" data-owner="3">3+ Owner</button>
              </div>
            </div>
          </div>

          <!-- Fuel Type filter -->
          <div class="filter-group">
            <button class="filter-btn" data-filter="fuel">
              Fuel Type <i class="fas fa-chevron-down"></i>
            </button>
            <div class="filter-dropdown" id="fuel-dropdown-mobile">
              <div class="filter-options fuel-options">
                <button class="filter-option" data-fuel="Petrol">Petrol</button>
                <button class="filter-option" data-fuel="Electric">
                  Electric
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
